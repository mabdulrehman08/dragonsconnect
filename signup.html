<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign Up</title>
    <link rel="stylesheet" href="signup.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>

<body>
    <div class="main">
      <h1>Dragons Connect</h1>  
      <h2>Sign Up</h2>
        <form id="signup-form">
            <label for="first-name">
              First Name:
            </label>
            <input type="text" id="first-name" placeholder="Enter your First Name" required>
            <label for="last-name">
              Last Name:
            </label>
            <input type="text" id="last-name" placeholder="Enter your Last Name" required>
            <label for="email">
              Email:
            </label>
            <input type="email" id="email" pattern="[a-z0-9._%+\-]+@drexel.edu" title="Must enter a drexel email" required placeholder="Enter your Email" required>
            <label for="password">
              Password:
            </label>
            <input type="password" id="password" placeholder=" Enter your Password" name="password"
                   pattern="^(?=.*\d)(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9])\S{8,}$" 
                   title="Password must contain at least one number, 
                           one alphabet, one symbol, and be at 
                           least 8 characters long" required />
            <button type="submit">Sign Up</button>
          </form>
          
          <p id="signup-message"></p>
          
          <script>
            import { createClient } from '@supabase/supabase-js'
            const supabaseUrl = 'https://ifamfjeazbkrnmqbxsux.supabase.co'
            const supabaseKey = process.env.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlmYW1mamVhemJrcm5tcWJ4c3V4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDAwNzU4NzYsImV4cCI6MjA1NTY1MTg3Nn0.pxme26fjpYTuH0yFUhFzf9o50n_5q7KfzgCD_8vwu_Q
            const supabase = createClient(supabaseUrl, supabaseKey)

            async function signUp() {
                const first = document.getElementById("first-name").value;
                const last = document.getElementById("last-name").value;
                const email = document.getElementById("email").value;
                const password = document.getElementById("password").value;
                
                let { user, error } = await supabaseClient.auth.signUp({ email, password });
                if (error) {
                    alert(error.message);
                } else {
                    alert("Sign-up successful!");
                }
            }
          </script>
    </div>
</body>
</html>
 